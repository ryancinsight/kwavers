apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "kwavers-pinn.fullname" . }}-config
  labels:
    {{- include "kwavers-pinn.labels" . | nindent 4 }}
data:
  config.toml: |
    [api]
    bind_address = "{{ .Values.config.api.bindAddress }}"
    port = {{ .Values.config.api.port }}
    request_timeout = {{ .Values.config.api.requestTimeout }}
    max_body_size = {{ .Values.config.api.maxBodySize }}

    [api.rate_limits]
    anonymous_rpm = {{ .Values.rateLimiting.anonymousRPM }}
    authenticated_rpm = {{ .Values.rateLimiting.authenticatedRPM }}
    burst_allowance = {{ .Values.rateLimiting.burstAllowance }}

    [monitoring]
    prometheus_endpoint = "{{ .Values.config.monitoring.prometheusEndpoint }}"
    health_check_endpoint = "{{ .Values.config.monitoring.healthCheckEndpoint }}"

    [logging]
    level = "{{ .Values.logging.level }}"
    format = "{{ .Values.logging.format }}"
