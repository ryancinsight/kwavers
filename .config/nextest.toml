[profile.ci]
test-threads = 4
retries = 0
fail-fast = true
global-timeout = "10m"
slow-timeout = { period = "10s", terminate-after = 3, grace-period = "10s" }

[profile.local]
test-threads = "num-cpus"
retries = 1
fail-fast = false
slow-timeout = { period = "30s", terminate-after = 1, grace-period = "10s" }

[profile.production]
test-threads = 2
retries = 2
fail-fast = true
global-timeout = "10m"
slow-timeout = { period = "5s", terminate-after = 1, grace-period = "5s" }

[profile.diagnostic]
inherits = "local"
retries = 0
fail-fast = false
slow-timeout = { period = "5s", terminate-after = 1, grace-period = "2s" }

[test-groups]
integration = { max-threads = 2 }

[[profile.ci.overrides]]
filter = 'test(/integration/)'
test-group = 'integration'

[[profile.local.overrides]]
filter = 'test(/integration/)'
test-group = 'integration'
